"use strict";exports.__esModule=!0,exports.deleteProduct=exports.editProduct=exports.addProduct=exports.editStoreName=exports.showProduct=exports.showProducts=exports.showStores=void 0;var _a=require("../../models/dist/storesModel"),Product=_a.Product,Store=_a.Store,Stores=_a.Stores,_b=require("../../models/dist/usersModel"),CartProduct=_b.CartProduct,User=_b.User,Users=_b.Users;exports.showStores=function(e,r){try{var t=new Stores;r.send({stores:t})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.showProducts=function(e,r){try{var t=e.params.storeUuid,o=new Stores,s=o.findStoreIndex(t),d=o.stores[s];"mall"===t?r.send({stores:o}):r.send({store:d})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.showProduct=function(e,r){try{var t=e.isAdmin,o=e.userIndex,s=e.cartProductIndex,d=e.storeIndex,c=e.productIndex,u=(new Stores).stores[d],n=new Users,a=u.products[c],i=void 0;t||-1===s||(i=n.users[o].cart[s]),r.send({storeProduct:a,cartProduct:i})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.editStoreName=function(e,r){},exports.addProduct=function(e,r){try{var t=e.body,o=t.storeUuid,s=t.productName,d=t.productDescription,c=t.productPrice,u=t.precentsOff,n=(t.productImage,t.productInStock),a=new Stores,i=e.file?e.file.filename:void 0,p=a.addProduct(o,s,d,c,u,i,n);r.send({store:p})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.editProduct=function(e,r){try{var t=e.body,o=t.storeUuid,s=t.productName,d=t.productDescription,c=t.productPrice,u=t.precentsOff,n=(t.productImage,t.productInStock),a=e.userUuid,i=new Stores,p=e.params.productUuid,l=e.file?e.file.filename:void 0;i.editProduct(o,a,p,s,d,c,u,l,n),r.send({productUpdate:!0})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.deleteProduct=function(e,r){try{var t=new Stores,o=e.params,s=o.storeUuid,d=o.productUuid;t.deleteProduct(s,d),r.send({deleteProduct:!0})}catch(e){console.error(e),r.status(500).send(e.message)}};