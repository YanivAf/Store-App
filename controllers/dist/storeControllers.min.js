"use strict";exports.__esModule=!0,exports.deleteProduct=exports.editProduct=exports.addProduct=exports.editStoreName=exports.showProduct=exports.showProducts=exports.showStores=void 0;var _a=require("../../models/dist/storesModel"),Product=_a.Product,Store=_a.Store,Stores=_a.Stores,_b=require("../../models/dist/usersModel"),CartProduct=_b.CartProduct,User=_b.User,Users=_b.Users;exports.showStores=function(e,r){try{var t=new Stores;r.send({stores:t})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.showProducts=function(e,r){try{var t,s,o=e.params.storeUuid,d=new Stores,c=d.findStoreIndex(o),u=d.stores[c];"mall"===o?(t=e.userIndex,s=(new Users).users[t].shippingAddress,r.send({stores:d,shippingAddress:s})):r.send({store:u})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.showProduct=function(e,r){try{var t=e.isAdmin,s=e.userIndex,o=e.cartProductIndex,d=e.storeIndex,c=e.productIndex,u=(new Stores).stores[d],n=new Users,a=u.products[c],i=void 0;t||-1===o||(i=n.users[s].cart[o]);var p=u.contactEmail,m=u.storeName;r.send({storeProduct:a,cartProduct:i,storeName:m,contactEmail:p})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.editStoreName=function(e,r){},exports.addProduct=function(e,r){try{var t=e.body,s=t.storeUuid,o=t.productName,d=t.productDescription,c=e.body,u=c.productPrice,n=c.precentsOff,a=c.productInStock,u=Number(u),n=Number(n),a=Number(a),i=new Stores,p=e.file?e.file.filename:void 0,m=i.addProduct(s,o,d,u,n,p,a);r.send({store:m})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.editProduct=function(e,r){try{var t=e.body,s=t.storeUuid,o=t.productName,d=t.productDescription,c=e.body,u=c.productPrice,n=c.precentsOff,a=c.productInStock,u=Number(u),n=Number(n),a=Number(a),i=e.userUuid,p=new Stores,m=e.params.productUuid,l=e.file?e.file.filename:void 0;p.editProduct(s,i,m,o,d,u,n,l,a),r.send({productUpdate:!0})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.deleteProduct=function(e,r){try{var t=new Stores,s=e.params,o=s.storeUuid,d=s.productUuid;t.deleteProduct(o,d),r.send({deleteProduct:!0})}catch(e){console.error(e),r.status(500).send(e.message)}};