"use strict";exports.__esModule=!0,exports.deleteProduct=exports.editProduct=exports.addProduct=exports.editStoreName=exports.showProduct=exports.showProducts=exports.showStores=void 0;var _a=require("../../models/dist/storesModel"),Product=_a.Product,Store=_a.Store,Stores=_a.Stores,_b=require("../../models/dist/usersModel"),CartProduct=_b.CartProduct,User=_b.User,Users=_b.Users;exports.showStores=function(e,r){try{var s=new Stores;r.send({stores:s})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.showProducts=function(e,r){try{var s,t,o=e.params.storeUuid,d=new Stores,c=d.findStoreIndex(o),u=d.stores[c];"mall"===o?(s=e.userIndex,t=(new Users).users[s].shippingAddress,r.send({stores:d,shippingAddress:t})):r.send({store:u})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.showProduct=function(e,r){try{var s=e.isAdmin,t=e.userIndex,o=e.cartProductIndex,d=e.storeIndex,c=e.productIndex,u=(new Stores).stores[d],n=new Users,a=u.products[c],i=void 0;s||-1===o||(i=n.users[t].cart[o]),r.send({storeProduct:a,cartProduct:i})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.editStoreName=function(e,r){},exports.addProduct=function(e,r){try{var s=e.body,t=s.storeUuid,o=s.productName,d=s.productDescription,c=s.productPrice,u=s.precentsOff,n=(s.productImage,s.productInStock),a=new Stores,i=e.file?e.file.filename:void 0,p=a.addProduct(t,o,d,c,u,i,n);r.send({store:p})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.editProduct=function(e,r){try{var s=e.body,t=s.storeUuid,o=s.productName,d=s.productDescription,c=s.productPrice,u=s.precentsOff,n=(s.productImage,s.productInStock),a=e.userUuid,i=new Stores,p=e.params.productUuid,l=e.file?e.file.filename:void 0;i.editProduct(t,a,p,o,d,c,u,l,n),r.send({productUpdate:!0})}catch(e){console.error(e),r.status(500).send(e.message)}},exports.deleteProduct=function(e,r){try{var s=new Stores,t=e.params,o=t.storeUuid,d=t.productUuid;s.deleteProduct(o,d),r.send({deleteProduct:!0})}catch(e){console.error(e),r.status(500).send(e.message)}};