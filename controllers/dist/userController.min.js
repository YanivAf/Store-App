"use strict";exports.__esModule=!0,exports.login=exports.register=exports.showProducts=exports.showStores=exports.welcome=void 0;var _a=require("../../models/dist/usersModel"),Users=_a.Users,User=_a.User;function welcome(e,s){try{s.send({h1Text:"Shop Shop Shop",message:"We wish you happy Shopping ðŸ›’"})}catch(e){console.error(e),s.status(500).send(e.message)}}function register(e,s){try{var r=e.body,t=r.email,o=r.username,n=r.password,i=r.isAdmin,a=i?"admin":"shopper",d=i?"\n\nShopper trying to become an admin? Please verify you credentials.":"",l=(new Users).addUser(t,o,n,i);l?(s.cookie("currentUser",{userUuid:l},{maxAge:9e5,httpOnly:!0}),s.send({title:"Cheers, "+o+"!",text:"You are our newest "+a+"!",isRegistered:!0})):s.send({title:"Email already registered",text:"Please use a different email address."+d,isRegistered:!1})}catch(e){console.error(e),s.status(500).send(e.message)}}function login(e,s){try{var r=e.body,t=r.email,o=r.password,n=r.isAdmin,i=n?"n admin":" shopper",a=(new Users).verifyUser(t,o);a?null===a.storeUuid&&!n||null!==a.storeUuid&&n?(s.cookie("currentUser",{userUuid:a.userUuid},{maxAge:9e5,httpOnly:!0}),s.send({title:"Welcome back, "+a.username+"!",text:"Enjoy your visit!",isLoggedIn:!0})):s.send({title:a.username+", you are a"+i+"!",text:"Please use the right login form!",isLoggedIn:!1}):s.send({title:"Credentials are wrong",text:"Please verify.",isLoggedIn:!1})}catch(e){console.error(e),s.status(500).send(e.message)}}exports.welcome=welcome,exports.showStores=function(e,s){try{s.send({showStores:!0})}catch(e){console.error(e),s.status(500).send(e.message)}},exports.showProducts=function(e,s){try{s.send({showProducts:!0})}catch(e){console.error(e),s.status(500).send(e.message)}},exports.register=register,exports.login=login;