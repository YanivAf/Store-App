var __awaiter=this&&this.__awaiter||function(t,i,c,a){return new(c=c||Promise)(function(r,e){function o(t){try{u(a.next(t))}catch(t){e(t)}}function n(t){try{u(a.throw(t))}catch(t){e(t)}}function u(t){var e;t.done?r(t.value):((e=t.value)instanceof c?e:new c(function(t){t(e)})).then(o,n)}u((a=a.apply(t,i||[])).next())})},__generator=this&&this.__generator||function(r,o){var n,u,i,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(n)throw new TypeError("Generator is already executing.");for(;c;)try{if(n=1,u&&(i=2&e[0]?u.return:e[0]?u.throw||((i=u.return)&&i.call(u),0):u.next)&&!(i=i.call(u,e[1])).done)return i;switch(u=0,i&&(e=[2&e[0],i.value]),e[0]){case 0:case 1:i=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,u=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(i=0<(i=c.trys).length&&i[i.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!i||e[1]>i[0]&&e[1]<i[3])){c.label=e[1];break}if(6===e[0]&&c.label<i[1]){c.label=i[1],i=e;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(e);break}i[2]&&c.ops.pop(),c.trys.pop();continue}e=o.call(r,c)}catch(t){e=[6,t],u=0}finally{n=i=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};function renderStore(){return __awaiter(this,void 0,void 0,function(){var e,r,o,c,a,n,u,i,s,d,l,p,_,m;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),[4,axios.get("/store/:storeUuid")];case 1:return e=t.sent(),r=e.data,o=r.store,(c=r.isAdmin)?[3,3]:[4,axios.get("/user/cart")];case 2:n=t.sent(),a=n.data.cartProducts,t.label=3;case 3:return u=o.storeName,i=o.products,s=document.querySelector(".main__item--store-name"),d=document.querySelector("title"),s.innerText=u,d.innerText=u,l=document.querySelector(".products"),_=0<i.length,p=_?i.map(function(e){var t,r,o,n;o=c?'<i class="product-buttons__item product-buttons__item--delete fas fa-trash" title="Delete '+e.productName+'"></i>\n                    <i class="product-buttons__item product-buttons__item--edit fas fa-edit" title="Edit '+e.productName+'"></i>':"<button "+(0===(r=(t=a.find(function(t){return t.productUuid===e.productUuid}))?t.quantity:0)?"disabled":"")+' class="product-buttons__item product-buttons__item--cart-reduce" title="Reduce quantity">-</button>\n                    <div class="product-buttons__item product-buttons__item--cart-quantity"'+(0===r?' style="background-color: gray;"':"")+' title="'+e.productName+' quantity">'+r+'</div>\n                    <button class="product-buttons__item product-buttons__item--cart-add" title="Add quantity">+</button>';var u=0<e.inStock,i=0<e.inStock?(n=e.inStock+" left",5<e.inStock?"green":"orange"):(n="Out of Stock","red");return c||u?'<div class="products__item product" id="'+e.productUuid+'">\n                    <h3 class="product__item product__item--name">'+e.productName+'</h3>\n                    <a href="./product.html?productUuid='+e.productUuid+'" class="product__item product__item--img">\n                        <img src="'+e.productImage+'" title="'+e.productName+'"/>\n                    </a>\n                    <a href="./product.html?productUuid='+e.productUuid+'" title="'+e.productDescription+'" class="product__item product__item--description">'+e.productDescription+'</a>\n                    <h4 class="product__item product__item--price">'+(Math.round(100*e.productPrice)/100).toFixed(2)+'$</h4>\n                    <div class="product__item product__item--stock" style="color:'+i+'">'+n+'</div>\n                    <div class="product__item product-buttons">'+o+"</div>\n                    \n                </div>":""}).join(""):"no products to show!",l.innerHTML=p,[3,5];case 4:return m=t.sent(),console.error(m.message),[3,5];case 5:return[2]}})})}renderStore();